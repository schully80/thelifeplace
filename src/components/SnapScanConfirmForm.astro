---
const {
  title = "Confirm Your Gift",
  eventName = "General Giving",
  snapMessage = "Thank you for your generosity. We’ve received your confirmation.",
  ctaText = "I’ve Given",
} = Astro.props;
---

<label for="purpose" class="block text-left text-brand-warmgray-700 font-medium mb-2">What are you giving toward?</label>
<select name="purpose" id="purpose" required class="w-full border-b border-gray-500 py-2 mb-4 text-sm text-brand-warmgray-800 focus:outline-none focus:border-brand-red">
  <option value="">Select an option</option>
  <option value="General Giving">General Giving</option>
  <option value="Vision Night">Vision Night</option>
 <option value="Bring Them To Jesus">Bring Them To Jesus</option>
  <option value="Kids @The Life Place">Kids @The Life Place</option>
  <option value="ThisGen">ThisGen</option>
  <option value="Premarital Counseling Program">Premarital Counseling Program</option>
   <option value="The Life Place Institute">The Life Place Institue</option>
 <option value="Faith and Work">Faith and Work</option>
  <option value="Relief Center">Relief Center</option>  
</select>

<section class="max-w-xl mx-auto px-4 py-12 text-center">
  <h2 class="text-3xl font-semibold text-brand-warmgray-800 mb-6">{title}</h2>

  <form id="snapConfirmForm" method="POST" action="https://formspree.io/f/yourFormID">
    <input type="text" name="name" required placeholder="Your Name *" class="w-full border-b border-gray-500 py-2 mb-4 text-xl font-medium text-brand-warmgray-800 focus:outline-none focus:border-brand-red" />
    
    <textarea name="message" placeholder="Optional Message or Prayer" rows="3" class="w-full border-b border-gray-500 py-2 mb-4 text-lg text-brand-warmgray-800 focus:outline-none focus:border-brand-red"></textarea>

    <input type="hidden" name="intent" value={eventName} />

    <button
      type="submit"
      class="inline-flex items-center gap-2 px-6 py-3 rounded-full font-semibold shadow-md bg-brand-red text-white hover:bg-red-700 hover:shadow-lg transition"
    >
      <span>{ctaText}</span>
    </button>
  </form>

  <div id="snapSuccess" class="hidden mt-10 text-center">
    <h3 class="text-2xl font-semibold text-brand-red mb-2">Thank You!</h3>
    <p class="text-lg text-brand-warmgray-700">{snapMessage}</p>
    <p class="mt-2 text-sm text-gray-500 italic">We’re grateful for your support. You’re helping us build something beautiful.</p>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("snapConfirmForm");
    const success = document.getElementById("snapSuccess");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = new FormData(form);

      fetch(form.action, {
        method: "POST",
        body: formData,
        headers: {
          Accept: "application/json"
        }
      })
      .then(response => {
        if (response.ok) {
          form.style.display = "none";
          success.classList.remove("hidden");
        } else {
          alert("Oops! Something went wrong. Please try again.");
        }
      });
    });
  });
</script>