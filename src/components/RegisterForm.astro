---
const {
  title = "Register",
  titleClass = "text-xl md:text-2xl font-medium text-brand-warmgray-800 text-center tracking-wide mb-5 md:mb-6",
  eventName = "General",
  ctaText = "Save My Spot",
  disabled = true,
  showNotice = true,
  formAction = "https://formspree.io/f/xldwoekj",
} = Astro.props;
---

<section class="max-w-3xl mx-auto px-4 py-8 md:py-12">
  <h2 class={titleClass}>{title}</h2>

  <form id="registrationForm" method="POST" action={formAction} class="space-y-5 md:space-y-6">
    <!-- Honeypot + intent -->
    <input type="text" name="website" class="hidden" tabindex="-1" autocomplete="off" />
    <input type="hidden" name="intent" value={eventName} />

    <!-- ðŸ”” TOP BLINKING NOTICE -->
    {showNotice && disabled && (
      <div class="text-center py-6" aria-live="polite">
        <p class="text-base md:text-xl font-medium text-gray-700 animate-pulse">
          Registration will open soon. Stay tuned!
        </p>
      </div>
    )}

    <!-- Name row -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
      <div>
        <input
          id="firstName"
          name="firstName"
          required
          class="form-field form-field-mobile"
          placeholder="Name *"
        />
      </div>
      <div>
        <input
          id="surname"
          name="surname"
          required
          class="form-field form-field-mobile"
          placeholder="Surname *"
        />
      </div>
    </div>

    <!-- Contact -->
    <div>
      <input
        id="contact"
        name="contact"
        type="tel"
        inputmode="tel"
        required
        class="form-field form-field-mobile"
        placeholder="Contact Number *"
      />
    </div>

    <!-- Email -->
    <div>
      <input
        id="email"
        name="email"
        type="email"
        autocomplete="email"
        required
        class="form-field form-field-mobile"
        placeholder="Email Address *"
      />
    </div>

    <!-- Address -->
    <div>
      <input
        id="streetAddress"
        name="streetAddress"
        autocomplete="street-address"
        required
        class="form-field form-field-mobile"
        placeholder="Street Address *"
      />
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
      <div>
        <input
          id="suburb"
          name="suburb"
          required
          class="form-field form-field-mobile"
          placeholder="Suburb *"
        />
      </div>
      <div>
        <input
          id="city"
          name="city"
          autocomplete="address-level2"
          required
          class="form-field form-field-mobile"
          placeholder="City *"
        />
      </div>
      <div>
        <input
          id="postalCode"
          name="postalCode"
          required
          minlength="3"
          maxlength="10"
          pattern=".{3,10}"
          class="form-field form-field-mobile"
          placeholder="Postal Code *"
        />
        <small class="block mt-1 text-[11px] md:text-xs text-gray-500">e.g. 2196 or W1A&nbsp;1AA</small>
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center pt-2">
      <button
        type="submit"
        disabled={disabled}
        class={`inline-flex items-center gap-2 px-5 md:px-6 py-2.5 md:py-3 rounded-full font-semibold shadow-md transition
          focus:outline-none focus:ring-2 focus:ring-red-700 focus:ring-offset-2
          ${disabled ? "bg-gray-400 cursor-not-allowed opacity-60" : "bg-brand-red text-white hover:bg-red-700 hover:shadow-lg"}`}
      >
        <span class="text-sm md:text-base">{ctaText}</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 animate-pulse" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M7 7h10v10" />
        </svg>
      </button>

      <!-- â¬‡ï¸ UNDER-BUTTON ITALIC NOTICE -->
      {showNotice && disabled && (
        <p class="mt-2 text-xs md:text-sm text-gray-500 italic">
          Registration is not yet open. Stay tuned!
        </p>
      )}
    </div>
  </form>
</section>
