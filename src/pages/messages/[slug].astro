---
import BaseLayout from "../../layouts/BaseLayout.astro";

// In the future, replace this with content collections.
// For now we accept query params via the link (title, speaker, date, image, summary).
const { slug } = Astro.params;

const title   = Astro.url.searchParams.get("title")   ?? "Message Title";
const speaker = Astro.url.searchParams.get("speaker") ?? "Guest Speaker";
const date    = Astro.url.searchParams.get("date")    ?? new Date().toISOString().slice(0,10);
const image   = Astro.url.searchParams.get("image")   ?? "/hero.jpg";
const summary = Astro.url.searchParams.get("summary") ?? "A short summary of the message will go here.";
---

<BaseLayout title={`${title} — Messages`}>
  <section class="container-x py-12 md:py-16">
    <a href="/messages/" class="text-sm underline">← Back to Messages</a>

    <div class="mt-4 grid gap-6 md:grid-cols-2 items-start">
      <div class="aspect-video rounded-xl overflow-hidden shadow">
        <img src={image} alt={title} class="w-full h-full object-cover"/>
      </div>

      <div>
        <h1 class="text-3xl md:text-5xl font-medium">{title}</h1>
        <p class="mt-2 text-gray-600">{speaker} • {new Date(date).toLocaleDateString()}</p>
        <p class="mt-6 text-lg leading-relaxed">{summary}</p>

        <!-- Placeholder action buttons -->
        <div class="mt-8 flex gap-3">
          <a class="btn btn-primary" href="#">Watch</a>
          <a class="btn btn-outline" href="#">Audio</a>
          <a class="btn btn-ghost" href="#">Notes</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>